<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Senda App - Watermark</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: #000000; 
            color: #ffffff;
            padding: 10px; 
            margin: 0;
        }

        /* ESTILO PRINCIPAL DE LA TARJETA */
        .card { 
            background: #1c1c1e; /* Color de fondo sÃ³lido */
            padding: 20px; 
            border-radius: 16px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.5); 
            max-width: 500px; 
            margin: auto;
            position: relative; /* Necesario para la marca de agua */
            overflow: hidden;   /* Para que la imagen no se salga de las esquinas */
        }

        /* --- MARCA DE AGUA --- */
        /* Esto crea una "capa fantasma" detrÃ¡s del texto con la imagen */
        .card::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            /* AQUÃ ABAJO ES DONDE CAMBIAS LA IMAGEN */
            background-image: url('linner.png'); 
            background-position: center center; /* Centrada */
            background-repeat: no-repeat;       /* Que no se repita como mosaico */
            background-size: 100%;               /* TamaÃ±o de la imagen (ajusta si es necesario) */
            opacity: 0.1;                      /* TRANSPARENCIA: Entre mÃ¡s bajo el nÃºmero, mÃ¡s transparente (0.05 es muy sutil) */
            z-index: 0;                         /* Asegura que quede al fondo */
            filter: grayscale(100%);            /* Opcional: hace la imagen blanco y negro para que no distraiga el color */
        }

        /* Aseguramos que el contenido (texto e inputs) quede POR ENCIMA de la marca de agua */
        .card > * {
            position: relative;
            z-index: 1;
        }
        /* ----------------------- */

        h2 { color: #ff3b30; text-align: center; margin: 0 0 10px 0; font-size: 22px; }
        .fecha-actual { text-align: center; font-size: 14px; color: #8e8e93; margin-bottom: 20px; text-transform: capitalize; }
        label { display: block; margin-top: 15px; font-weight: 600; color: #8e8e93; font-size: 13px; text-transform: uppercase; letter-spacing: 0.5px; }
        input { width: 100%; padding: 12px; margin-top: 5px; border: 1px solid #3a3a3c; border-radius: 10px; box-sizing: border-box; font-size: 17px; background-color: #2c2c2e; color: white; outline: none; }
        input:focus { border-color: #ff3b30; background-color: #3a3a3c; }
        .row { display: flex; gap: 12px; }
        .row div { flex: 1; }
        #kmRecorridos { text-align: center; font-weight: bold; color: #32d74b; margin-top: 10px; font-size: 15px; min-height: 20px; }
        .btn-generar { width: 100%; background-color: #ff3b30; color: white; border: none; padding: 16px; border-radius: 12px; margin-top: 25px; font-weight: bold; font-size: 18px; cursor: pointer; }
        .btn-generar:active { opacity: 0.8; }
        #resultado { margin-top: 20px; background: #2c2c2e; padding: 15px; border-radius: 12px; white-space: pre-line; display: none; border-left: 4px solid #ff3b30; font-family: monospace; font-size: 14px; color: #e5e5ea; }
        .btn-copiar { width: 100%; background-color: #32d74b; color: white; border: none; padding: 14px; border-radius: 12px; margin-top: 15px; display: none; font-weight: bold; font-size: 16px; cursor: pointer; }
        .btn-link { width: 100%; background-color: #3a3a3c; color: #8e8e93; border: none; padding: 12px; border-radius: 12px; margin-top: 20px; text-decoration: none; display: block; text-align: center; font-size: 14px; }
    </style>
</head>
<body onload="cargarFecha()">

<div class="card">
    <h2>LogÃ­stica Senda</h2>
    <div id="displayFecha" class="fecha-actual"></div>
    
    <div class="row">
        <div><label>Planta</label><input type="text" id="planta" value="Nemak"></div>
        <div><label>Unidad</label><input type="number" id="unidad" value="6644"></div>
    </div>
    
    <label>Ruta</label>
    <input type="text" id="ruta" placeholder="Ej: Puerta Mitraz">

    <div class="row">
        <div><label>Turno</label><input type="text" id="turno" placeholder="Ej: 5:50am"></div>
    </div>

    <div class="row">
        <div><label>Odo. Inicial</label><input type="number" id="odoIni" placeholder="Inicio" oninput="calcularKM()"></div>
        <div><label>Odo. Final</label><input type="number" id="odoFin" placeholder="Fin" oninput="calcularKM()"></div>
    </div>
    
    <div id="kmRecorridos"></div>
    
    <div class="row">
        <div><label>Mete (Pax)</label><input type="number" id="mete" placeholder="0"></div>
        <div><label>Saque (Pax)</label><input type="number" id="saque" placeholder="0"></div>
    </div>

    <button class="btn-generar" onclick="generarReporte()">GENERAR REPORTE</button>
    <div id="resultado"></div>
    <button id="btnCopiar" class="btn-copiar" onclick="copiarTexto()">COPIAR AL PORTAPAPELES</button>
    <a href="https://docs.google.com/forms/d/e/1FAIpQLScDbFy89GYeGZwdnkegCfQEpsPW3z4LnoM4M_HFFqLd1OeDMw/viewform" target="_blank" class="btn-link">Ir al Formulario Oficial</a>
</div>

<script>
    function cargarFecha() {
        const hoy = new Date();
        const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('displayFecha').innerText = hoy.toLocaleDateString('es-MX', opciones);
    }

    function calcularKM() {
        const ini = document.getElementById('odoIni').value;
        const fin = document.getElementById('odoFin').value;
        const divKM = document.getElementById('kmRecorridos');
        if (ini && fin) {
            const diferencia = fin - ini;
            divKM.innerText = diferencia >= 0 ? `Total Recorrido: ${diferencia} km` : "Error: Revisar odÃ³metros";
            divKM.style.color = diferencia >= 0 ? "#32d74b" : "#ff453a";
        } else { divKM.innerText = ""; }
    }

    function generarReporte() {
        const planta = document.getElementById('planta').value;
        const turno = document.getElementById('turno').value;
        const ruta = document.getElementById('ruta').value;
        const unidad = document.getElementById('unidad').value;
        const odoIni = document.getElementById('odoIni').value;
        const odoFin = document.getElementById('odoFin').value;
        const mete = document.getElementById('mete').value;
        const saque = document.getElementById('saque').value;
        const fecha = document.getElementById('displayFecha').innerText;
        let kmTotal = (odoIni && odoFin) ? (odoFin - odoIni) : 0;

        const textoFinal = `*REPORTE SENDA - ${unidad}*
ðŸ“… *Fecha:* ${fecha}
ðŸ­ *Planta:* ${planta}
â° *Turno:* ${turno}
ðŸ›£ï¸ *Ruta:* ${ruta}
ðŸšŒ *Unidad:* ${unidad}
ðŸ”¢ *OdÃ³metro:* ${odoIni} - ${odoFin} (${kmTotal} km)
ðŸ“ˆ *Mete:* ${mete} pax
ðŸ“‰ *Saque:* ${saque} pax`;

        const divRes = document.getElementById('resultado');
        divRes.innerText = textoFinal; divRes.style.display = 'block';
        const btnCopiar = document.getElementById('btnCopiar'); btnCopiar.style.display = 'block';
        btnCopiar.scrollIntoView({ behavior: "smooth" });
    }

    function copiarTexto() {
        const texto = document.getElementById('resultado').innerText;
        navigator.clipboard.writeText(texto).then(() => alert("Â¡Copiado! Listo para pegar."));
    }
</script>
</body>
</html>
